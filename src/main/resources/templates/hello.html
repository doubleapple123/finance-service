<!DOCTYPE html>
<html xmlns:th="http://www.thmeleaf.org">

<head>
    <meta charset="ISO-8859-1">
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
           ></script>
</head>

<body>

<div id="myChart" style="height: 800px; width: 80%"></div>
<div id="TAChart" style="height: 200px; width: 80%"></div>
<p>
</p>
<script type="text/javascript">
    let symbolsName = "[[${symbols}]]";
    symbolsName = symbolsName.replace("[", "");
    symbolsName = symbolsName.replace("]", "");

    let symbolName = "[[${name}]]";

    let manySymbols = "[[${multSym}]]";
    let manySymbolsArr = manySymbols.split("+");

    let symbolsNameArr = symbolsName.split(",");

    manySymbolsArr.pop();

    let dataStr = "[[${dataColl}]]";
    let volDataStr = "[[${volDataColl}]]";

    let volDataArr = volDataStr.split(":");
    let dataArr = dataStr.split(":");

    volDataArr.pop();
    dataArr.pop();

    let volData = "";
    let parsData = "";

    for (var x = 0; x < volDataArr.length; x++) {
        volData += volDataArr[x] + "\n";
    }

    for (var i = 0; i < dataArr.length; i++) {
        parsData += dataArr[i] + "\n";
    }

    function getDataPointsFromCSV(csv) {
        var dataPoints = csvLines = points = [];
        csvLines = csv.split(/[\r?\n|\r|\n]+/);

        for (var i = 0; i < csvLines.length; i++)
            if (csvLines[i].length > 0) {
                points = csvLines[i].split(",");
                dataPoints.push({
                    x: new Date(points[0]),
                    y: parseFloat(points[1])
                });
            }
        return dataPoints;
    }

</script>
<script type = "text/javascript" src = "/makeChart.js"></script>
</body>
</html>